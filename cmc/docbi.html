<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Documentation PFE - Habib Haj Brahem | CMC Tunisie</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary: #003366;
      --primary-light: rgba(0, 51, 102, 0.1);
      --secondary: #00a0e9;
      --secondary-light: rgba(0, 160, 233, 0.1);
      --accent: #ff6b6b;
      --accent-light: rgba(255, 107, 107, 0.1);
      --light: #f8f9fa;
      --dark: #212529;
      --success: #28a745;
      --success-light: rgba(40, 167, 69, 0.1);
      --warning: #ffc107;
      --warning-light: rgba(255, 193, 7, 0.1);
      --danger: #dc3545;
      --danger-light: rgba(220, 53, 69, 0.1);
    }


body.no-scroll {
  overflow: hidden;
}

    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
      color: var(--dark);
      line-height: 1.7;
      overflow-x: hidden;
      perspective: 1000px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 2rem 0;
      text-align: center;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 10px 30px rgba(0, 51, 102, 0.3);
      transform-style: preserve-3d;
      transform: translateZ(0);
      margin-bottom: 3rem;
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
      transform: rotate(30deg);
      animation: shine 8s infinite linear;
    }
    
    @keyframes shine {
      0% { transform: rotate(30deg) translate(-30%, -30%); }
      100% { transform: rotate(30deg) translate(30%, 30%); }
    }
    
    h1, h2, h3, h4 {
      color: var(--primary);
      font-weight: 700;
      margin-bottom: 1rem;
    }
    
    h1 {
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      position: relative;
      z-index: 2;
    }
    
    h2 {
      font-size: 2rem;
      margin-top: 3rem;
      position: relative;
      display: inline-block;
    }
    
    h2::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 60px;
      height: 4px;
      background: var(--secondary);
      border-radius: 2px;
    }
    
    h3 {
      font-size: 1.5rem;
      margin-top: 2rem;
      color: var(--secondary);
    }
    
    p {
      margin-bottom: 1.5rem;
    }
    
    .section {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      transform-style: preserve-3d;
    }
    
    .section:hover {
      transform: translateY(-5px) rotateX(1deg);
      box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    
    ul, ol {
      margin-left: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    li {
      margin-bottom: 0.5rem;
      position: relative;
      padding-left: 1.5rem;
    }
    
    li::before {
      content: '•';
      position: absolute;
      left: 0;
      color: var(--secondary);
      font-weight: bold;
    }
    
    code {
      background: rgba(0, 160, 233, 0.1);
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      color: var(--secondary);
      font-size: 0.9rem;
    }
    
    .btn {
      display: inline-block;
      background: var(--secondary);
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      margin: 0.5rem 0;
      box-shadow: 0 4px 15px rgba(0, 160, 233, 0.3);
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    
    .btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
      transform: rotate(30deg);
      transition: all 0.7s ease;
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 20px rgba(0, 160, 233, 0.4);
      background: var(--secondary);
    }
    
    .btn:hover::after {
      transform: rotate(30deg) translate(30%, 30%);
    }
    
    .btn-primary {
      background: var(--primary);
      box-shadow: 0 4px 15px rgba(0, 51, 102, 0.3);
    }
    
    .btn-primary:hover {
      box-shadow: 0 7px 20px rgba(0, 51, 102, 0.4);
      background: var(--primary);
    }
    
    .btn-accent {
      background: var(--accent);
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
    }
    
    .btn-accent:hover {
      box-shadow: 0 7px 20px rgba(255, 107, 107, 0.4);
      background: var(--accent);
    }
    
    .card {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    
    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--primary);
    }
    
    .tag {
      display: inline-block;
      padding: 0.3rem 0.8rem;
      border-radius: 50px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .tag-success {
      background: rgba(40, 167, 69, 0.1);
      color: var(--success);
    }
    
    .tag-warning {
      background: rgba(255, 193, 7, 0.1);
      color: var(--warning);
    }
    
    .tag-danger {
      background: rgba(220, 53, 69, 0.1);
      color: var(--danger);
    }
    
    .dwh-model {
      width: 100%;
      height: 600px;
      background: white;
      border-radius: 15px;
      margin: 2rem 0;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      perspective: 1000px;
    }
    
    .dwh-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 150px;
      height: 150px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      box-shadow: 0 0 0 10px rgba(0, 51, 102, 0.2), 0 0 0 20px rgba(0, 51, 102, 0.1);
      z-index: 10;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0, 51, 102, 0.4); }
      70% { box-shadow: 0 0 0 15px rgba(0, 51, 102, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 51, 102, 0); }
    }
    
    .dwh-dimension {
      position: absolute;
      width: 120px;
      height: 120px;
      background: white;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.5s ease;
      cursor: pointer;
      transform-style: preserve-3d;
      z-index: 5;
    }
    
    .dwh-dimension:hover {
      transform: translateY(-10px) rotateY(10deg) scale(1.1);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
      z-index: 20;
    }
    
    .dwh-dimension i {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: var(--secondary);
    }
    
    .dwh-dimension h4 {
      font-size: 0.9rem;
      text-align: center;
      margin: 0;
    }
    
    .dwh-connector {
      position: absolute;
      background: rgba(0, 160, 233, 0.3);
      height: 3px;
      transform-origin: left center;
      z-index: 1;
    }
    
    .ml-features {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 1.5rem 0;
    }
    
    .ml-feature {
      flex: 1 1 300px;
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
      border-left: 4px solid var(--secondary);
      cursor: pointer;
    }
    
    .ml-feature:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      background: linear-gradient(135deg, white 0%, var(--secondary-light) 100%);
      border-left: 4px solid var(--primary);
    }
    
    .ml-feature h4 {
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      transition: color 0.3s ease;
    }
    
    .ml-feature:hover h4 {
      color: var(--secondary);
    }
    
    .ml-feature h4 i {
      margin-right: 0.5rem;
    }
    
    .ml-feature p {
      font-size: 0.9rem;
      color: #666;
      transition: color 0.3s ease;
    }
    
    .ml-feature:hover p {
      color: var(--dark);
    }
    
    .status-dot {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 0.5rem;
    }
    
    .status-success {
      background: var(--success);
      box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);
    }
    
    .status-danger {
      background: var(--danger);
      box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);
    }
    
    /* Popup Styles */
    

.popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}


    
    .popup-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    

.popup {
  position: absolute;
  left: 50%;
  top: 0;
  transform: translate(-50%, 0);
  background: white;
  border-radius: 15px;
  width: 90%;
  max-width: 700px;
  max-height: 70vh;
  overflow-y: auto;
  padding: 1.5rem;
  box-shadow: 0 15px 40px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
  border-top: 5px solid var(--secondary);
}


    
    .popup-overlay.active 

.popup {
  position: absolute;
  left: 50%;
  top: 0;
  transform: translate(-50%, 0);
  background: white;
  border-radius: 15px;
  width: 90%;
  max-width: 700px;
  max-height: 70vh;
  overflow-y: auto;
  padding: 1.5rem;
  box-shadow: 0 15px 40px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
  border-top: 5px solid var(--secondary);
}


    
    .popup-close {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .popup-close:hover {
      color: var(--accent);
    }
    
    .popup-title {
      color: var(--primary);
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--secondary-light);
    }
    
    .popup-content {
      margin-bottom: 1.5rem;
    }
    
    .popup-columns {
      display: flex;
      gap: 2rem;
      margin-top: 1.5rem;
    }
    
    .popup-column {
      flex: 1;
    }
    
    .popup-column h4 {
      color: var(--secondary);
      margin-bottom: 1rem;
    }
    
    .popup-list {
      list-style-type: none;
      margin-left: 0;
    }
    
    .popup-list li {
      padding: 0.5rem 0;
      border-bottom: 1px solid #eee;
      display: flex;
    }
    
    .popup-list li:last-child {
      border-bottom: none;
    }
    
    .popup-list strong {
      min-width: 150px;
      display: inline-block;
      color: var(--primary);
    }
    
    @media (max-width: 768px) {
      .dwh-model {
        height: 400px;
      }
      
      .dwh-dimension {
        width: 80px;
        height: 80px;
      }
      
      .dwh-dimension i {
        font-size: 1.5rem;
      }
      
      .dwh-dimension h4 {
        font-size: 0.7rem;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      h2 {
        font-size: 1.5rem;
      }
      
      .popup-columns {
        flex-direction: column;
        gap: 1rem;
      }
      
      

.popup {
  position: absolute;
  left: 50%;
  top: 0;
  transform: translate(-50%, 0);
  background: white;
  border-radius: 15px;
  width: 90%;
  max-width: 700px;
  max-height: 70vh;
  overflow-y: auto;
  padding: 1.5rem;
  box-shadow: 0 15px 40px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
  border-top: 5px solid var(--secondary);
}


    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Documentation Technique – Projet PFE Data Warehouse & BI</h1>
      <p>CMC Tunisie – Réalisé par : Habib Haj Brahem</p>
      <div style="margin-top: 1.5rem;">
        <button class="btn btn-primary" id="exploreBtn"><i class="fas fa-search"></i> Explorer le Modèle</button>
        <button class="btn" id="viewDashboardBtn"><i class="fas fa-tachometer-alt"></i> Voir Dashboard</button>
        <button class="btn btn-accent" id="contactBtn"><i class="fas fa-envelope"></i> Contact</button>
      </div>
    </div>
  </header>

  <div class="container">
    <section class="section">
      <h2>1. Objectif du Projet</h2>
      <p>
        Ce projet a pour objectif de concevoir un <strong>Data Warehouse professionnel</strong> pour CMC Tunisie,
        à partir de fichiers Excel internes, afin d'implémenter une solution de <strong>Business Intelligence</strong> complète
        (tableaux de bord interactifs, visualisations dynamiques et analyses prédictives).
      </p>
      <div class="card">
        <div class="card-title">Points Clés</div>
        <ul>
          <li>Centralisation des données de vente multi-sources</li>
          <li>Analyse historique 2021-2023</li>
          <li>Tableaux de bord interactifs pour la direction</li>
          <li>Préparation pour l'analyse prédictive</li>
        </ul>
      </div>
    </section>

    <section class="section">
      <h2>2. Modèle de Données (Star Schema)</h2>
      <p>Le modèle adopté est un <strong>modèle en étoile</strong>, composé de :</p>
      <ul>
        <li><strong>Table de faits :</strong> <code>Fact_Ventes</code></li>
        <li><strong>Dimensions :</strong> Client, Produit, Date, Société, Commercial, Facture, Classe Marge</li>
      </ul>

      <!-- Interactive 3D Data Warehouse Model -->
      <div class="dwh-model" id="dwhModel">
        <div class="dwh-center">Fact_Ventes</div>
        <!-- Dimensions will be added here by JavaScript -->
      </div>

      <div class="ml-features">
        <div class="ml-feature" id="filterFeature">
          <h4><i class="fas fa-filter"></i> Filtres Avancés</h4>
          <p>Filtrage interactif par période, région, produit et commercial avec mise à jour en temps réel des visualisations.</p>
        </div>
        <div class="ml-feature" id="timeFeature">
          <h4><i class="fas fa-chart-line"></i> Analyse Temporelle</h4>
          <p>Comparaison annuelle et mensuelle avec indicateurs de croissance et tendances.</p>
        </div>
        <div class="ml-feature" id="topFeature">
          <h4><i class="fas fa-trophy"></i> Top Performers</h4>
          <p>Identification des meilleurs clients, produits et commerciaux avec indicateurs clés.</p>
        </div>
      </div>

      <h3>2.1 Table de faits – <code>Fact_Ventes</code></h3>
      <p>Contient les mesures : CA_TND, CA_EUR, Prix de vente, Marge, Coût de revient, Taux de rentabilité</p>

      <h3>2.2 Dimensions – Utilisation dans le dashboard</h3>
      <div class="ml-features">
        <div class="ml-feature" id="dimPartenaire">
          <h4><i class="fas fa-users"></i> <code>Dim_Partenaire</code></h4>
          <p>Filtres clients, segmentation par ville, analyse par groupe</p>
        </div>
        <div class="ml-feature" id="dimProduit">
          <h4><i class="fas fa-box-open"></i> <code>Dim_Produit</code></h4>
          <p>Analyse CA et marge par catégorie/produit</p>
        </div>
        <div class="ml-feature" id="dimDate">
          <h4><i class="fas fa-calendar-alt"></i> <code>Dim_Date</code></h4>
          <p>Analyse temporelle (mois, année, trimestre)</p>
        </div>
        <div class="ml-feature" id="dimMarge">
          <h4><i class="fas fa-percentage"></i> <code>Dim_Classe_Marge</code></h4>
          <p>Visualisation des marges moyennes par type de produit</p>
        </div>
        <div class="ml-feature" id="dimSociete">
          <h4><i class="fas fa-building"></i> <code>Dim_Société</code></h4>
          <p>Filtrage par entité (CMC Négoce, CMC Distribution...)</p>
        </div>
        <div class="ml-feature" id="dimCommercial">
          <h4><i class="fas fa-user-tie"></i> <code>Dim_Commercial</code></h4>
          <p>Suivi des performances commerciales</p>
        </div>
        <div class="ml-feature" id="dimFacture">
          <h4><i class="fas fa-file-invoice"></i> <code>Dim_Facture</code></h4>
          <p>Drill-down par référence facture</p>
        </div>
        <div class="ml-feature" id="dimFournisseur">
          <h4><i class="fas fa-truck"></i> <code>Dim_Fournisseur</code></h4>
          <p>Suivi Des Fournisseurs Les plus presents</p>
        </div>
      </div>
    </section>

    <!-- Other sections remain the same as before -->
    <section class="section">
      <h2>3. Phase ETL (Extract – Transform – Load)</h2>
      <ol>
        <li><strong>Extract :</strong> Chargement des 6 fichiers Excel fournis par CMC Tunisie</li>
        <li><strong>Transform :</strong>
          <ul>
            <li>Nettoyage des doublons</li>
            <li>Jointures entre les sources</li>
            <li>Mapping des dimensions (par nom → ID)</li>
          </ul>
        </li>
        <li><strong>Load :</strong>
          <ul>
            <li>Création des tables dans SQL</li>
            <li>Chargement automatique des dimensions et faits</li>
          </ul>
        </li>
      </ol>
      
      <div class="card">
        <div class="card-title">Technologies Utilisées</div>
        <div>
          <span class="tag tag-success"><i class="fas fa-database"></i> SQL Server</span>
          <span class="tag tag-success"><i class="fas fa-table"></i> SSIS</span>
          <span class="tag tag-warning"><i class="fas fa-file-excel"></i> Excel</span>
          <span class="tag tag-success"><i class="fas fa-chart-bar"></i> Power BI</span>
        </div>
      </div>
    </section>

    <section class="section">
      <h2>4. Phase EDA (Exploration des Données)</h2>
      <ul>
       
      </ul>
      
      <button class="btn" id="viewInsightsBtn"><i class="fas fa-chart-pie"></i> Voir les Insights</button>
    </section>

    <section class="section">
      <h2>5. Dashboarding (Power BI)</h2>
      <p>Les dashboards générés permettront :</p>
      <ul>
        <li>Un <strong>KPI board</strong> : CA global, marge globale, rentabilité moyenne</li>
        <li>Un <strong>comparatif annuel</strong> 2021–2022–2023</li>
        <li>Un <strong>top 10 clients</strong> / produits / commerciaux</li>
        <li>Une <strong>filtres interactive</strong> par ville / région</li>
        <li>Des <strong>filtres dynamiques</strong> sur date, client, commercial, produit</li>
      </ul>
      
      <div class="card">
        <div class="card-title">Visualisations Clés</div>
        <div>
          <span class="tag"><i class="fas fa-chart-line"></i> Séries Temporelles</span>
          <span class="tag"><i class="fas fa-map-marked-alt"></i> Cartes Géographiques</span>
          <span class="tag"><i class="fas fa-chart-bar"></i> Histogrammes</span>
          <span class="tag"><i class="fas fa-chart-pie"></i> Camemberts</span>
          <span class="tag"><i class="fas fa-table"></i> Tableaux Croisés</span>
        </div>
      </div>
    </section>

    <section class="section">
      <h2>6. Intégration future de Machine Learning / Deep Learning</h2>
      <p>Une fois les données bien structurées, on pourra ajouter :</p>
      
      <div class="ml-features">
        <div class="ml-feature" id="mlPrediction">
          <h4><span class="status-dot status-success"></span> <i class="fas fa-chart-line"></i> Prédiction du CA</h4>
          <p>Modèles de régression (linéaire, XGBoost...) pour anticiper le CA du mois suivant</p>
        </div>
        <div class="ml-feature" id="mlTrend">
          <h4><span class="status-dot status-success"></span> <i class="fas fa-project-diagram"></i> Détection de tendance</h4>
          <p>Réseaux de neurones récurrents (LSTM/RNN) sur les séries temporelles de ventes</p>
        </div>
        <div class="ml-feature" id="mlCluster">
          <h4><span class="status-dot status-danger"></span> <i class="fas fa-users"></i> Clustering des clients</h4>
          <p>Segmentation comportementale (K-means, DBSCAN), nécessite une EDA avancée</p>
        </div>
        <div class="ml-feature" id="mlChurn">
          <h4><span class="status-dot status-danger"></span> <i class="fas fa-user-slash"></i> Analyse de churn</h4>
          <p>Prédiction des clients à risque, après analyse de l'historique 2021–2023</p>
        </div>
      </div>

      <div class="card">
        <div class="card-title">Statut des Fonctionnalités</div>
        <p><strong><span class="status-dot status-success"></span> Vert :</strong> Projet faisable dès la fin de la phase DWH + Dashboard</p>
        <p><strong><span class="status-dot status-danger"></span> Rouge :</strong> Requiert une phase d'EDA approfondie et enrichissement des données clients</p>
      </div>
    </section>
  </div>

  <!-- Popup Overlay -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup" id="popup">
      <span class="popup-close" id="popupClose">&times;</span>
      <h3 class="popup-title" id="popupTitle">Titre de la Popup</h3>
      <div class="popup-content" id="popupContent">
        <p id="popupDescription">Description de la dimension...</p>
        
        <div class="popup-columns">
          <div class="popup-column">
            <h4>Champs Principaux</h4>
            <ul class="popup-list" id="popupFields">
              <!-- Fields will be added by JavaScript -->
            </ul>
          </div>
          <div class="popup-column">
            <h4>Utilisation dans le Dashboard</h4>
            <p id="popupUsage">Description de l'utilisation...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Dimension data with fields and descriptions
    const dimensions = {
      partenaire: {
        title: "Dim_Partenaire",
        icon: "users",
        description: "Cette dimension contient toutes les informations relatives aux partenaires (clients) de CMC Tunisie. Elle permet d'analyser les ventes par client, groupe client, ou région géographique.",
        fields: [
          {name: "ID_Partenaire", description: "Identifiant unique du partenaire"},
          {name: "Nom_partenaire", description: "Nom complet du partenaire"},
          {name: "Groupe_Client", description: "Groupe d'appartenance du client"},
          {name: "État (Ville)", description: "Ville ou région du partenaire"},
          {name: "FK_Commercial", description: "Référence du commercial attitré"}
        ],
        usage: "Utilisée pour filtrer les données par client, analyser les performances par région, et segmenter les clients par groupe. Permet également de suivre l'évolution des ventes par partenaire."
      },
      produit: {
        title: "Dim_Produit",
        icon: "box-open",
        description: "Cette dimension décrit tous les produits vendus par CMC Tunisie avec leur classification et catégorie.",
        fields: [
          {name: "ID_Produit", description: "Identifiant unique du produit"},
          {name: "Nom_Produit", description: "Désignation complète du produit"},
          {name: "Classe_Produit", description: "Classe du produit (A, B, C...)"},
          {name: "Catégorie_Produit", description: "Catégorie ou famille du produit"}
        ],
        usage: "Essentielle pour analyser les ventes par produit, catégorie ou classe. Permet d'identifier les produits performants et ceux nécessitant une attention particulière."
      },
      date: {
        title: "Dim_Date",
        icon: "calendar-alt",
        description: "Dimension temporelle permettant d'analyser les données selon différentes périodes (jour, mois, trimestre, année).",
        fields: [
          {name: "ID_Date", description: "Identifiant unique de la date"},
          {name: "Date_Complete", description: "Date au format complet"},
          {name: "Jour", description: "Numéro du jour dans le mois"},
          {name: "Nom_Jour", description: "Nom du jour (Lundi, Mardi...)"},
          {name: "Mois", description: "Numéro du mois"},
          {name: "Nom_Mois", description: "Nom du mois"},
          {name: "Trimestre", description: "Trimestre (1 à 4)"},
          {name: "Année", description: "Année complète"},
          {name: "Semaine_Année", description: "Numéro de semaine dans l'année"}
        ],
        usage: "Permet toutes les analyses temporelles : comparaison année par année, suivi mensuel, analyse saisonnière, etc. Un élément clé pour le reporting périodique."
      },
      classe_marge: {
        title: "Dim_Classe_Marge",
        icon: "percentage",
        description: "Cette dimension classe les produits selon leur taux de marge, permettant une analyse rapide de la rentabilité.",
        fields: [
          {name: "ID_Classe_Marge", description: "Identifiant unique de la classe"},
          {name: "Classe_Produit", description: "Classe associée au produit"},
          {name: "Taux_Marge", description: "Taux de marge moyen pour cette classe"}
        ],
        usage: "Utilisée pour visualiser rapidement les produits les plus rentables et ceux à marge faible. Permet des analyses de rentabilité par catégorie de produits."
      },
      commercial: {
        title: "Dim_Commercial",
        icon: "user-tie",
        description: "Dimension contenant les informations sur les commerciaux de CMC Tunisie.",
        fields: [
          {name: "ID_Commercial", description: "Identifiant unique du commercial"},
          {name: "Nom_Commercial", description: "Nom complet du commercial"}
        ],
        usage: "Permet de suivre les performances individuelles des commerciaux, d'analyser leur portefeuille clients et d'évaluer leur contribution au chiffre d'affaires."
      },
      societe: {
        title: "Dim_Société",
        icon: "building",
        description: "Cette dimension représente les différentes entités juridiques de CMC Tunisie.",
        fields: [
          {name: "ID_Société", description: "Identifiant unique de la société"},
          {name: "Nom_Société", description: "Dénomination complète de la société"}
        ],
        usage: "Permet de filtrer les données par entité juridique (CMC Négoce, CMC Distribution, etc.) pour des analyses spécifiques à chaque société."
      },
      facture: {
        title: "Dim_Facture",
        icon: "file-invoice",
        description: "Dimension contenant les informations de référence des factures.",
        fields: [
          {name: "ID_Facture", description: "Identifiant unique de la facture"},
          {name: "Ref_Facture", description: "Référence complète de la facture"}
        ],
        usage: "Permet un drill-down jusqu'au niveau facture pour des analyses détaillées. Essentiel pour le suivi des opérations spécifiques."
      },
      fournisseur: {
        title: "Dim_Fournisseurs",
        icon: "truck",
        description: "Cette dimension liste les fournisseurs des produits vendus par CMC Tunisie.",
        fields: [
          {name: "Id_fournisseur", description: "Identifiant unique du fournisseur"},
          {name: "Nom_fournisseur", description: "Nom complet du fournisseur"}
        ],
        usage: "Permet d'analyser les ventes par fournisseur et d'identifier les partenaires clés dans la chaîne d'approvisionnement."
      }
    };

    document.addEventListener('DOMContentLoaded', function() {
      // Create interactive 3D Data Warehouse model
      const model = document.getElementById('dwhModel');
      const center = model.querySelector('.dwh-center');
      const centerRect = center.getBoundingClientRect();
      const modelRect = model.getBoundingClientRect();
      
      const centerX = centerRect.left - modelRect.left + centerRect.width/2;
      const centerY = centerRect.top - modelRect.top + centerRect.height/2;
      
      const dimConfig = [
        { key: 'partenaire', angle: 0 },
        { key: 'produit', angle: 45 },
        { key: 'date', angle: 90 },
        { key: 'classe_marge', angle: 135 },
        { key: 'commercial', angle: 180 },
        { key: 'societe', angle: 225 },
        { key: 'facture', angle: 270 },
        { key: 'fournisseur', angle: 315 }
      ];
      
      const radius = Math.min(modelRect.width, modelRect.height) * 0.35;
      
      dimConfig.forEach(dim => {
        const angle = dim.angle * Math.PI / 180;
        const x = centerX + radius * Math.cos(angle) - 60;
        const y = centerY + radius * Math.sin(angle) - 60;
        
        const dimElement = document.createElement('div');
        dimElement.className = 'dwh-dimension';
        dimElement.style.left = `${x}px`;
        dimElement.style.top = `${y}px`;
        dimElement.innerHTML = `<i class="fas fa-${dimensions[dim.key].icon}"></i><h4>${dimensions[dim.key].title.replace('Dim_', '')}</h4>`;
        
        // Add interaction
        dimElement.addEventListener('click', function() {
          showDimensionPopup(dim.key);
        });
        
        // Add connector
        const connector = document.createElement('div');
        connector.className = 'dwh-connector';
        connector.style.width = `${radius}px`;
        connector.style.left = `${centerX}px`;
        connector.style.top = `${centerY}px`;
        connector.style.transform = `rotate(${dim.angle}deg)`;
        
        model.appendChild(connector);
        model.appendChild(dimElement);
      });
      
      // Setup click events for all dimension cards
      document.getElementById('dimPartenaire').addEventListener('click', function() {
        showDimensionPopup('partenaire');
      });
      document.getElementById('dimProduit').addEventListener('click', function() {
        showDimensionPopup('produit');
      });
      document.getElementById('dimDate').addEventListener('click', function() {
        showDimensionPopup('date');
      });
      document.getElementById('dimMarge').addEventListener('click', function() {
        showDimensionPopup('classe_marge');
      });
      document.getElementById('dimSociete').addEventListener('click', function() {
        showDimensionPopup('societe');
      });
      document.getElementById('dimCommercial').addEventListener('click', function() {
        showDimensionPopup('commercial');
      });
      document.getElementById('dimFacture').addEventListener('click', function() {
        showDimensionPopup('facture');
      });
      document.getElementById('dimFournisseur').addEventListener('click', function() {
        showDimensionPopup('fournisseur');
      });
      
      // Setup click events for ML feature cards
      document.getElementById('filterFeature').addEventListener('click', function() {
        alert("Ouverture des détails des filtres avancés...");
      });
      
      document.getElementById('timeFeature').addEventListener('click', function() {
        alert("Ouverture des analyses temporelles...");
      });
      
      document.getElementById('topFeature').addEventListener('click', function() {
        alert("Ouverture du classement des meilleurs performeurs...");
      });
      
      document.getElementById('mlPrediction').addEventListener('click', function() {
        alert("Détails de la prédiction du CA...");
      });
      
      document.getElementById('mlTrend').addEventListener('click', function() {
        alert("Détails de la détection de tendance...");
      });
      
      document.getElementById('mlCluster').addEventListener('click', function() {
        alert("Détails du clustering des clients...");
      });
      
      document.getElementById('mlChurn').addEventListener('click', function() {
        alert("Détails de l'analyse de churn...");
      });
      
      // Button interactions
      document.getElementById('exploreBtn').addEventListener('click', function() {
        alert('Exploration du modèle de données en cours...');
      });
      
      document.getElementById('viewDashboardBtn').addEventListener('click', function() {
        alert('Ouverture du tableau de bord Power BI...');
      });
      
      document.getElementById('contactBtn').addEventListener('click', function() {
        alert('Contactez moi à hajbrahem.habib@gmail.com');
      });
      
      document.getElementById('viewInsightsBtn').addEventListener('click', function() {
        alert('Affichage des insights et analyses découvertes pendant la phase EDA...');
      });
      
      // Popup close button
      document.getElementById('popupClose').addEventListener('click', function() {
        document.getElementById('popupOverlay').classList.remove('active');
    document.body.classList.remove('no-scroll');
      });
      
      // Close popup when clicking outside
      document.getElementById('popupOverlay').addEventListener('click', function(e) {
        if (e.target === this) {
          this.classList.remove('active');
      document.body.classList.remove('no-scroll');
        }
      });
      
      // Add subtle animation to sections when scrolling
      const sections = document.querySelectorAll('.section');
      
      function checkScroll() {
        sections.forEach(section => {
          const sectionTop = section.getBoundingClientRect().top;
          const windowHeight = window.innerHeight;
          
          if (sectionTop < windowHeight * 0.75) {
            section.style.opacity = '1';
            section.style.transform = 'translateY(0)';
          }
        });
      }
      
      // Initial state
      sections.forEach((section, index) => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(20px)';
        section.style.transition = `opacity 0.5s ease ${index * 0.1}s, transform 0.5s ease ${index * 0.1}s`;
      });
      
      window.addEventListener('scroll', checkScroll);
      checkScroll(); // Check on load
    });
    
    function showDimensionPopup(dimKey) {
      const dim = dimensions[dimKey];
      const popup = document.getElementById('popup');
      
      // Set popup content
      document.getElementById('popupTitle').textContent = dim.title;
      document.getElementById('popupDescription').textContent = dim.description;
      document.getElementById('popupUsage').textContent = dim.usage;
      
      // Clear and populate fields list
      const fieldsList = document.getElementById('popupFields');
      fieldsList.innerHTML = '';
      
      dim.fields.forEach(field => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${field.name}</strong><span>${field.description}</span>`;
        fieldsList.appendChild(li);
      });
      
      // Show popup
      
  const popupElement = document.getElementById('popup');
  const scrollY = window.scrollY || window.pageYOffset;
  popupElement.style.top = `${scrollY + 100}px`;
  document.getElementById('popupOverlay').classList.add('active');
  document.body.classList.add('no-scroll');
    }
  </script>
</body>
</html>
